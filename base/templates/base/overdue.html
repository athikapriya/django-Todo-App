{% extends 'base/main.html' %}
{% load static %}
{% block content %}

<section id="pending_tasks">
    <div class="container my-4">
        <div class="row">
            <div class="card card-body">
                <h2 class="main-heading">Overdue Tasks</h2>
                <hr>
                <table class="table table-sm">
                    <tr>
                        <th>Task</th>
                        <th>Deadline</th>
                        <th>Priority</th>
                        <th>Edit</th>
                        <th>Delete</th>
                    </tr>

                    {% for task in overdue_tasks %}
                    <tr>
                        <td class="task-name__cell d-flex align-item-center">
                            <form action="{% url 'toggle_task' task.id %}" method="POST">
                                {% csrf_token %}
                                <input type="checkbox" name="" id="" onchange="this.form.submit()"
                                {% if task.is_completed %} checked {% endif %}>
                            </form>
                            <span>{{task.name}}</span>
                        </td>

                        <td>
                            <span>
                                <i class="fa-regular fa-clock"></i>
                            </span>
                            {{task.deadline|date:'d M, h: i A'}}
                        </td>

                        <td>
                            <span class="priority-badge {{task.priority|lower}}">
                                {% if task.priority == "High" %}
                                    <i class="fa-solid fa-circle-exclamation"></i>
                                {% elif task.priority == "Medium" %}
                                    <i class="fa-solid fa-circle"></i>
                                {% else %}
                                    <i class="fa-regular fa-circle"></i>
                                {% endif %}
                                {{ task.priority }}
                            </span>
                        </td>

                         <td>
                            <a href="{% url 'update_task' task.id %}">
                                <i class="fa-solid fa-pen-clip"></i>
                            </a>
                        </td>
                         <td>
                            <a href="{% url 'delete_task' task.id %}">
                                <i class="fa-solid fa-trash-arrow-up"></i>
                             </a>
                        </td>
                    </tr>
                    {% endfor %}
                </table>
            </div>
        </div>
    </div>
</section>
{% endblock %}