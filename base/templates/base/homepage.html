{% extends 'base/main.html' %} 
{% load static %} 
{% block content %}

<section id="task-section">
  <div class="container ">

    <!-- tasks header -->
    <div class="row my-4">
        <div class="col-8 offset-md-2 col-md-7 offset-lg-3 col-lg-6 d-flex justify-content-center align-items-center"> 
            <form action="" method="get">
                <div class="d-flex search-btn">
                    <input type="search" class="form-control" placeholder="Type for search...." />
                    <button type="submit" name="Search" value="Search" class="btn btn-sm " >
                        <i class="fa-solid fa-magnifying-glass"></i>
                    </button>
                </div>
            </form>
        </div>
        <div class="col-4 col-md-3 d-flex justify-content-end align-items-center"> 
            <a href="" class="text-center task-add__btn text-decoration-none mybtn">Add Task</a>
        </div>
    </div>

    <!-- tasks -->
    <div class="row my-4">
        <div class="col-12">
            <div class="card card-body">
                <h2 class="main-heading">Tasks</h2>
                <hr>
                <table class="table table-sm">
                    <tr>
                        <th>Is complete</th>
                        <th>task name</th>
                        <th>task deadline</th>
                        <th>Priority</th>
                        <th>Edit</th>
                        <th>Delete</th>
                    </tr>

                    {% for task in tasks %}
                        <tr>
                            <td>
                                <form action="{% url 'toggle_task' task.id %}" method="POST">
                                    {% csrf_token %}

                                    <input type="checkbox" name="" id="" 
                                    onchange="this.form.submit()"
                                    {% if task.is_completed %} checked {% endif %}>
                                </form>
                            </td>
                            <td>{{task.name}}</td>
                            <td>{{task.deadline |date:"D, d M Y"}}</td>
                            <td>{{task.priority}}</td>
                            <td>
                                <a href="">Edit</a>
                            </td>
                            <td>
                                <a href="">Delete</a>
                            </td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
        </div>
    </div>

  </div>
</section>
{% endblock %}
